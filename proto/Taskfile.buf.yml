version: "3"
tasks:
  init:
    desc: init buf
    cmds:
      - brew install buf
      - go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.34.1
      - go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.4.0
  lint:
    desc: lint and format proto
    dir: "{{.ROOT_DIR}}/proto"
    cmds:
      - buf format -w
      - buf lint
    silent: true
  gen:
    desc: generate interface
    dir: "{{.ROOT_DIR}}/proto"
    cmds:
      - buf generate
    silent: true
